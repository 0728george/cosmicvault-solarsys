---
import SolarSystem from '../components/SolarSystem.tsx';
import MainLayout from '../layouts/MainLayout.astro';
import { useState } from 'react';
---

<MainLayout title="Cosmic Vault - Solar System Explorer">
  <div class="container">
    <h1>Cosmic Vault Solar System Explorer</h1>
    <p class="subtitle">A Christopher Nolan-inspired journey through our solar system. Set any date to see accurate positions.</p>

    <div class="controls">
      <label>Set Date:</label>
      <input type="date" id="datePicker" value="2025-12-18" />
      <button id="updateBtn">Update View</button>
      <button id="todayBtn">Today (Dec 18, 2025)</button>
    </div>

    <div class="canvas-wrapper">
      <SolarSystem client:load date="2025-12-18" />
    </div>
  </div>
</MainLayout>

<script>
  const datePicker = document.getElementById('datePicker');
  const updateBtn = document.getElementById('updateBtn');
  const todayBtn = document.getElementById('todayBtn');

  updateBtn.addEventListener('click', () => {
    const newDate = datePicker.value;
    if (newDate) {
      // Simple reload with query param â€“ or upgrade to state later
      window.location.search = `?date=${newDate}`;
    }
  });

  todayBtn.addEventListener('click', () => {
    datePicker.value = '2025-12-18';
    window.location.search = '?date=2025-12-18';
  });

  // Load date from URL if present
  const params = new URLSearchParams(window.location.search);
  if (params.get('date')) {
    datePicker.value = params.get('date');
  }
</script>

<style>
  .container { max-width: 1400px; margin: 0 auto; padding: 2rem; text-align: center; color: white; }
  .subtitle { font-size: 1.2rem; opacity: 0.8; margin-bottom: 2rem; }
  .controls { background: rgba(0,0,0,0.6); padding: 1.5rem; border-radius: 12px; display: inline-block; margin-bottom: 2rem; }
  .controls label { margin-right: 1rem; font-size: 1.1rem; }
  .controls input, .controls button { padding: 0.8rem; margin: 0 0.5rem; border-radius: 8px; border: none; }
  .canvas-wrapper { width: 100%; height: 80vh; min-height: 700px; border-radius: 12px; overflow: hidden; box-shadow: 0 0 50px rgba(0,50,100,0.3); }
</style>